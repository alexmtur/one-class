<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../web-animations-js/web-animations.min.html">

<dom-module id="one-navbar-item">
    <script>
        class OneClass extends Polymer.Element {
            static get is() { return "one-class"; }
            static get properties() {
                return {
                    animations: {
                        type: Object,
                        value: {
                            'fade-in': [
                                {opacity: 0},
                                {opacity: 1}
                            ],
                            'fade-in-left': [
                                {opacity: 0, transform: 'translate3d(-100%, 0, 0)'},
                                {opacity: 1, transform: 'none'}
                            ],
                            'fade-in-right': [
                                {opacity: 0, transform: 'translate3d(100%, 0, 0)'},
                                {opacity: 1, transform: 'none'}
                            ],
                            'fade-out': [
                                {opacity: 1},
                                {opacity: 0}
                            ],
                            'fade-out-left': [
                                {opacity: 0, transform: 'none'},
                                {opacity: 1, transform: 'translate3d(-100%, 0, 0)'}
                            ],
                            'fade-out-right': [
                                {opacity: 0, transform: 'none'},
                                {opacity: 1, transform: 'translate3d(100%, 0, 0)'}
                            ],
                            'slide-in-left': [
                                {transform: 'translate3d(-100%, 0, 0)'},
                                {transform: 'none'}
                            ],
                            'slide-in-right': [
                                {transform: 'translate3d(100%, 0, 0)'},
                                {transform: 'none'}
                            ],
                            'slide-out-left': [
                                {transform: 'none'},
                                {transform: 'translate3d(-100%, 0, 0)'}
                            ],
                            'slide-out-right': [
                                {transform: 'none'},
                                {transform: 'translate3d(100%, 0, 0)'}
                            ],
                            'expand': [
                                {transform: 'scale(0)'}, //, maxHeight: "0"
                                {transform: 'scale(1.3)'},
                                {transform: 'scale(1)'} //, maxHeight: "100px"
                            ],
                            'shrink': [
                                {transform: 'scale(1)'}, //, maxHeight: "0"
                                {transform: 'scale(0)'} //, maxHeight: "100px"
                            ],
                            'vertical-expand': [
                                {height: '0', maxHeight: '0'}, //, maxHeight: "0"
                                {height: 'auto', maxHeight: '1000px'} //, maxHeight: "100px"
                            ],
                        }
                    },
                    visible: {
                        type: Boolean,
                        value: false,
                        reflectToAttribute: true,
                        notify: true,
                        observer: '_visibleChanged'
                    },
                    entryAnimation: {
                        type: String
                    },
                    exitAnimation: {
                        type: String
                    },
                    overlapAnimation: {
                        type: Boolean,
                        value: false
                    }
                    //entryKeyframes, exitKeyframes for more customization
                };
            }
            _visibleChanged(newValue, oldValue) {
                if(newValue === undefined) return;
                if(oldValue === undefined && !newValue) this.hide();
                else if(newValue) {
                    if(this.overlapAnimation) this.style.position = "absolute";
                    this.show();
                    if(this.entryAnimation)
                        this.animate(this.animations[this.entryAnimation], {duration: 300, easing: 'ease-in-out'});
                }
                else if(!newValue) {
                    if(this.exitAnimation){
                        if(this.overlapAnimation) this.style.position = "absolute";
                        this.animationController = this.animate(this.animations[this.exitAnimation], {duration: 300, easing: 'ease-in-out'});
                        this.animationController.onfinish = () => {this.style.display = "none";};
                    }
                    else {
                        this.hide();
                    }
                }
            }
            show() {
                //Pass an argument for the type of display
                this.style.display = "block";
            }
            hide() {
                this.style.display = "none";
            }
        }
        customElements.define(OneClass.is, OneClass);
    </script>
</dom-module>